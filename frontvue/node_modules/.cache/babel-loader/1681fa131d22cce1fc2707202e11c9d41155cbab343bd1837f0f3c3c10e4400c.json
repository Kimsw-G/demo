{"ast":null,"code":"import \"core-js/modules/es.array.push.js\";\nimport { reactive } from 'vue';\nimport InfiniteLoading from \"v3-infinite-loading\";\nimport { useRoute } from 'vue-router';\nimport MyCal from '@/components/MyCalendar.vue';\nimport axios from 'axios';\n// import \"v3-infinite-loading/lib/style.css\";\n\nconst __default__ = {\n  components: {\n    MyCal,\n    InfiniteLoading\n  },\n  data() {\n    return {\n      sampleData: ''\n    };\n  },\n  methods: {}\n};\nexport default /*#__PURE__*/Object.assign(__default__, {\n  __name: 'TodoSpecDayView',\n  setup(__props, {\n    expose\n  }) {\n    expose();\n    let query = useRoute().query;\n    let data = reactive({\n      feeds: []\n    });\n    let page = 1;\n    const date = `\"${query.year}-${query.month}-${query.day}\"`;\n    const suser = 1;\n    const load = async $state => {\n      console.log('im here');\n      try {\n        const json = loadData();\n        console.log(json);\n        if (json.length < 10) {\n          console.log(\"complete all\");\n          $state.complete();\n        } else {\n          console.log(\"load\");\n          data.feeds.push(...json);\n          $state.loaded();\n        }\n        page++;\n        console.log('hi' + page);\n      } catch (error) {\n        $state.error();\n        console.log(error);\n      }\n    };\n    const loadData = () => {\n      console.log('go axios!');\n      let data;\n      axios.get(`/feed/getSpecDay?suser=${suser}&day=${date}&page=${page}`).then(res => {\n        data = res.data;\n        console.log(data);\n      }).catch(err => {\n        console.log(err);\n      });\n      return data;\n    };\n    const __returned__ = {\n      get query() {\n        return query;\n      },\n      set query(v) {\n        query = v;\n      },\n      get data() {\n        return data;\n      },\n      set data(v) {\n        data = v;\n      },\n      get page() {\n        return page;\n      },\n      set page(v) {\n        page = v;\n      },\n      date,\n      suser,\n      load,\n      loadData,\n      reactive,\n      get InfiniteLoading() {\n        return InfiniteLoading;\n      },\n      get useRoute() {\n        return useRoute;\n      },\n      MyCal,\n      get axios() {\n        return axios;\n      }\n    };\n    Object.defineProperty(__returned__, '__isScriptSetup', {\n      enumerable: false,\n      value: true\n    });\n    return __returned__;\n  }\n});","map":{"version":3,"mappings":";AAkBA,SAASA,QAAQ,QAAQ,KAAK;AAC9B,OAAOC,eAAe,MAAM,qBAAqB;AACjD,SAASC,QAAQ,QAAQ,YAAY;AACrC,OAAOC,KAAK,MAAM,6BAA6B;AAC/C,OAAOC,KAAK,MAAM,OAAO;AACzB;;AAkDA,oBAAe;EACXC,UAAU,EAAE;IACRF,KAAK;IACLF;EACJ,CAAC;EACDK,IAAI,GAAG;IACH,OAAO;MACHC,UAAU,EAAE;IAChB,CAAC;EACL,CAAC;EACDC,OAAO,EAAE,CAAC;AACd,CAAC;;;;;;;IA3DD,IAAIC,KAAK,GAAGP,QAAQ,EAAE,CAACO,KAAK;IAC5B,IAAIH,IAAI,GAAGN,QAAQ,CAAC;MAChBU,KAAK,EAAC;IACV,CAAC,CAAC;IACF,IAAIC,IAAI,GAAG,CAAC;IAEZ,MAAMC,IAAI,GAAI,IAAGH,KAAK,CAACI,IAAK,IAAGJ,KAAK,CAACK,KAAM,IAAGL,KAAK,CAACM,GAAI,GAAE;IAC1D,MAAMC,KAAK,GAAG,CAAC;IAEf,MAAMC,IAAI,GAAG,MAAMC,MAAM,IAAI;MACzBC,OAAO,CAACC,GAAG,CAAC,SAAS,CAAC;MACtB,IAAI;QACA,MAAMC,IAAI,GAAGC,QAAQ,EAAE;QACvBH,OAAO,CAACC,GAAG,CAACC,IAAI,CAAC;QAEjB,IAAIA,IAAI,CAACE,MAAM,GAAG,EAAE,EAAE;UAClBJ,OAAO,CAACC,GAAG,CAAC,cAAc,CAAC;UAC3BF,MAAM,CAACM,QAAQ,EAAE;QACrB,CAAC,MACI;UACDL,OAAO,CAACC,GAAG,CAAC,MAAM,CAAC;UACnBd,IAAI,CAACI,KAAK,CAACe,IAAI,CAAC,GAAGJ,IAAI,CAAC;UACxBH,MAAM,CAACQ,MAAM,EAAE;QACnB;QACAf,IAAI,EAAE;QACNQ,OAAO,CAACC,GAAG,CAAC,IAAI,GAAGT,IAAI,CAAC;MAC5B,CAAC,CAAC,OAAOgB,KAAK,EAAE;QACZT,MAAM,CAACS,KAAK,EAAE;QACdR,OAAO,CAACC,GAAG,CAACO,KAAK,CAAC;MACtB;IACJ,CAAC;IAGD,MAAML,QAAQ,GAAG,MAAI;MACjBH,OAAO,CAACC,GAAG,CAAC,WAAW,CAAC;MACxB,IAAId,IAAI;MACRF,KAAK,CAACwB,GAAG,CAAE,0BAAyBZ,KAAM,QAAOJ,IAAK,SAAQD,IAAK,EAAC,CACnE,CAACkB,IAAI,CAACC,GAAG,IAAE;QACRxB,IAAI,GAACwB,GAAG,CAACxB,IAAI;QACba,OAAO,CAACC,GAAG,CAACd,IAAI,CAAC;MACrB,CAAC,CAAC,CAACyB,KAAK,CAACC,GAAG,IAAE;QACVb,OAAO,CAACC,GAAG,CAACY,GAAG,CAAC;MACpB,CAAC,CAAC;MACF,OAAO1B,IAAI;IACf,CAAC","names":["reactive","InfiniteLoading","useRoute","MyCal","axios","components","data","sampleData","methods","query","feeds","page","date","year","month","day","suser","load","$state","console","log","json","loadData","length","complete","push","loaded","error","get","then","res","catch","err"],"sources":["C:/Users/ds/Documents/ksw/swtodo/frontvue/src/views/todo/TodoSpecDayView.vue"],"sourcesContent":["<template>\r\n    <div id=\"main\">\r\n        <div class=\"result\" v-for=\"feed in data.feeds\" :key=\"feed\">\r\n            <div>\r\n                {{ feed.pk }},\r\n                {{ feed.ftitle }},\r\n                {{ feed.ftext }},\r\n                {{ feed.start_day }},\r\n                {{ feed.end_day }},\r\n            </div>\r\n        </div>\r\n        <InfiniteLoading @infinite=\"load\"></InfiniteLoading>\r\n    </div>\r\n    <div id=\"cal\">\r\n        <MyCal></MyCal>\r\n    </div>\r\n</template>\r\n<script setup>\r\nimport { reactive } from 'vue';\r\nimport InfiniteLoading from \"v3-infinite-loading\";\r\nimport { useRoute } from 'vue-router';\r\nimport MyCal from '@/components/MyCalendar.vue'\r\nimport axios from 'axios';\r\n// import \"v3-infinite-loading/lib/style.css\";\r\n\r\nlet query = useRoute().query\r\nlet data = reactive({\r\n    feeds:[]\r\n})\r\nlet page = 1\r\n\r\nconst date = `\"${query.year}-${query.month}-${query.day}\"`\r\nconst suser = 1\r\n\r\nconst load = async $state => {\r\n    console.log('im here');\r\n    try {\r\n        const json = loadData()\r\n        console.log(json);\r\n        \r\n        if (json.length < 10) {\r\n            console.log(\"complete all\");\r\n            $state.complete()\r\n        }\r\n        else {\r\n            console.log(\"load\");\r\n            data.feeds.push(...json)\r\n            $state.loaded()\r\n        }\r\n        page++\r\n        console.log('hi' + page);\r\n    } catch (error) {\r\n        $state.error()\r\n        console.log(error);\r\n    }\r\n}\r\n\r\n\r\nconst loadData = ()=>{\r\n    console.log('go axios!');\r\n    let data\r\n    axios.get(`/feed/getSpecDay?suser=${suser}&day=${date}&page=${page}`\r\n    ).then(res=>{\r\n        data=res.data\r\n        console.log(data);\r\n    }).catch(err=>{\r\n        console.log(err);\r\n    })\r\n    return data\r\n}\r\n</script>\r\n\r\n<script>\r\nexport default {\r\n    components: {\r\n        MyCal,\r\n        InfiniteLoading\r\n    },\r\n    data() {\r\n        return {\r\n            sampleData: ''\r\n        }\r\n    },\r\n    methods: {}\r\n}\r\n</script>\r\n<style>\r\n#main{\r\n    display: inline-block;\r\n    width: 70vw;\r\n    overflow: scroll;\r\n}\r\n#cal{\r\n    vertical-align: top ;\r\n    display: inline-block;\r\n    width: 30vw;\r\n    height: 30vh;\r\n}\r\n.day{\r\n    font-size: 10px;\r\n}\r\n.td-link{\r\n    width: 1em;\r\n    height: 1em;\r\n    border: none !important\r\n}\r\n.td-link:hover{\r\n    background-color: #7de0b4;\r\n}\r\n.imsi{\r\n    height: 110vh;\r\n    background-color: yellow;\r\n}\r\n</style>"]},"metadata":{},"sourceType":"module","externalDependencies":[]}